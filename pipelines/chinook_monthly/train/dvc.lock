schema: '2.0'
stages:
  data:
    cmd: chinook_db -e ../data/bathymetry.csv -s ../data/surface_temps.csv -t ../data/tag_tracks.csv
      -c ../data/context.csv
    deps:
    - path: ../../../mirrorverse/chinook/db.py
      hash: md5
      md5: 398cc8de46cfa7d0721ec9f0bc6d3a77
      size: 2532
    params:
      params.yaml:
        context: ../data/context.csv
        data: ../data/tag_tracks.csv
        elevation: ../data/bathymetry.csv
        temps: ../data/surface_temps.csv
    outs:
    - path: ../data/bathymetry.csv
      hash: md5
      md5: 009f0c0129454d53218b4358abba345c
      size: 522273
    - path: ../data/context.csv
      hash: md5
      md5: 02489ea16c9d726e85f406b34c4a9ddb
      size: 2042
    - path: ../data/surface_temps.csv
      hash: md5
      md5: e6fd742a220be751db011ba75dc26227
      size: 3847027
    - path: ../data/tag_tracks.csv
      hash: md5
      md5: a2c11e27477300708f3feaf1be5a5543
      size: 325093
  states:
    cmd: chinook_monthly_states -d ../data/tag_tracks.csv -c ../data/context.csv -o
      .  -r 3 -ts 0.7
    deps:
    - path: ../../../mirrorverse/chinook/utils.py
      hash: md5
      md5: 98b3c577b04810412ae1287fefaff2a5
      size: 1906
    - path: ../../../mirrorverse/chinook_monthly/states.py
      hash: md5
      md5: 92eabe7113bf7f579c00c13e1780ba88
      size: 2315
    - path: ../data/context.csv
      hash: md5
      md5: 02489ea16c9d726e85f406b34c4a9ddb
      size: 2042
    - path: ../data/tag_tracks.csv
      hash: md5
      md5: a2c11e27477300708f3feaf1be5a5543
      size: 325093
    params:
      params.yaml:
        context: ../data/context.csv
        data: ../data/tag_tracks.csv
        resolution: 3
        training_size: 0.7
    outs:
    - path: testing_states.csv
      hash: md5
      md5: c283d0c8df08fa51085f4f4c141d8edb
      size: 3210
    - path: training_states.csv
      hash: md5
      md5: a87ca77628e0ff602d9804e0580c0770
      size: 6807
  train_drift_movement:
    cmd: chinook_monthly_train -n DriftMovementLeaf -tr training_states.csv -te testing_states.csv
      -t ../data/surface_temps.csv -e ../data/bathymetry.csv -m . -r 3
    deps:
    - path: ../../../mirrorverse/chinook_monthly/train.py
      hash: md5
      md5: 2518a65d40223f6caf8584c439bfc1cf
      size: 2416
    - path: ../../../mirrorverse/chinook_monthly/tree/drift_movement.py
      hash: md5
      md5: 2d2713f9d362d5d1188bd25962ca4c12
      size: 5622
    - path: ../../../mirrorverse/tree.py
      hash: md5
      md5: c2478124c0aec761f032feabc10efb9e
      size: 9457
    - path: ../data/bathymetry.csv
      hash: md5
      md5: 009f0c0129454d53218b4358abba345c
      size: 522273
    - path: ../data/surface_temps.csv
      hash: md5
      md5: e6fd742a220be751db011ba75dc26227
      size: 3847027
    - path: testing_states.csv
      hash: md5
      md5: c283d0c8df08fa51085f4f4c141d8edb
      size: 3210
    - path: training_states.csv
      hash: md5
      md5: a87ca77628e0ff602d9804e0580c0770
      size: 6807
    params:
      params.yaml:
        elevation: ../data/bathymetry.csv
        resolution: 3
        temps: ../data/surface_temps.csv
    outs:
    - path: DriftMovementLeaf.csv
      hash: md5
      md5: f2f83aad455d831a1d2b5ecba2bd4aa1
      size: 2709168
    - path: DriftMovementLeaf.pkl
      hash: md5
      md5: a80b827381295003f0402d2b0971a56b
      size: 338653
  bundle_models:
    cmd: mirrorverse_bundle_models -m .
    deps:
    - path: DriftMovementLeaf.pkl
      hash: md5
      md5: a80b827381295003f0402d2b0971a56b
      size: 338653
    outs:
    - path: models.pkl
      hash: md5
      md5: 769d5ba2cd3b1d976aa6d0b1a36d4432
      size: 338663
